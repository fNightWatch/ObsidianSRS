# Obsidian SRS (Spaced Repetition System)

Скрипт реализует SRS-процесс поверх обычных markdown-файлов в Obsidian Vault:

- пользователь отмечает тему маркером `@! <сложность 1..10>`;
- скрипт индексирует событие повторения, сохраняет историю и автоматически заменяет маркер на `@@ <сложность>`;
- для каждой заметки вычисляется **urgency** (насколько срочно повторять);
- в YAML frontmatter выставляется цветовой тег `srs/...` (от красного к зелёному);
- можно получить отчёт с приоритетом повторения.

## Как это работает

Учитываются 2 фактора:

1. **Сложность** (1..10) — субъективная оценка в момент повторения.
2. **Удалённость во времени** — вычисляется автоматически по timestamp последнего повторения.

Дополнительно в формулу заложен «бонус мастерства»: чем больше повторений у заметки, тем больше интервал до следующего повторения.

## Установка

Требуется Python 3.10+ (внешние зависимости не нужны).

## Быстрый старт

Из корня vault:

```bash
python3 srs.py --vault . scan
python3 srs.py --vault . report
python3 srs.py --vault . sync
```

### 1) Отметка повторения в заметке

В нужной заметке добавьте строку с маркером:

```md
@! 7
```

После `scan`:
- событие сохранится в `.obsidian_srs/index.json`;
- в заметке `@! 7` заменится на `@@ 7`;
- обновится/создастся frontmatter и тег `srs/<color>`.

### 2) Ручное добавление повторения (без маркера)

```bash
python3 srs.py --vault . review --file "path/to/note.md" --difficulty 6
```

### 3) Приоритетный список на повторение

```bash
python3 srs.py --vault . report --limit 20
```

## Цветовые уровни

`urgency` (0..1) преобразуется в теги:

- `srs/critical-red`
- `srs/red`
- `srs/orange`
- `srs/yellow`
- `srs/lime`
- `srs/green`

Можно сделать правила CSS/плагины Obsidian, которые визуально подсвечивают эти теги.

## Рекомендованный workflow

1. После изучения темы ставите в заметке `@! <оценка сложности>`.
2. Раз в день/несколько дней запускаете:
   - `scan` — забрать новые события;
   - `sync` — пересчитать цвета для всех проиндексированных заметок;
   - `report` — увидеть список, что повторять первым.

## Автоматизация (опционально)

Можно повесить на cron/Task Scheduler:

```bash
python3 /path/to/vault/srs.py --vault /path/to/vault sync
```

## Формат хранилища

История хранится в `.obsidian_srs/index.json` в виде списка событий для каждой заметки:

- `ts` — ISO timestamp;
- `difficulty` — сложность 1..10.

